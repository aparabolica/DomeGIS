<div class="cartocss-wizard">
  <ul class="type-selector">
    <li ng-class="{active:mapType=='simple'}">
      <a href="javascript:void(0);" ng-click="setMapType('simple')">Simple</a>
    </li>
    <li ng-class="{active:mapType=='choropleth'}">
      <a href="javascript:void(0);" ng-click="setMapType('choropleth')">Choropleth</a>
    </li>
    <li ng-class="{active:mapType=='category'}">
      <a href="javascript:void(0);" ng-click="setMapType('category')">Category</a>
    </li>
  </ul>
  <table ng-show="mapType == 'choropleth' || mapType == 'category'">
    <tbody>
      <tr>
        <td>
          <label for="category_column">Select column</label>
        </td>
        <td>
          <select ng-options="column.name for column in (layer.fields | mapType:mapType) track by column.name" ng-model="column" ng-change="selectColumn(column.name, '{{column.name}}')">
            <option value=''>Select a column</option>
          </select>
        </td>
      </tr>
      <tr ng-show="categories && column.type != 'number'" ng-repeat="category in categories">
        <td>{{category}}</td>
        <td>
          <input class="colorpicker-input" colorpicker ng-style="{'background-color': styles.category[column.key][category] || '#fff', 'color': getContrastYIQ(styles.category[column.key][category])}" ng-model="styles.category[column.key][category]" type="text" />
        </td>
      </tr>
    </tbody>
  </table>
  <table class="choropleth_settings" ng-show="mapType == 'choropleth' && column">
    <tbody>
      <tr>
        <td>Bucket size</td>
        <td>
          <select ng-model="styles.choropleth[column.key].bucket_size" ng-options="size as size for size in [3,5,7] track by size"></select>
        </td>
      </tr>
      <tr>
        <td>Color ramp</td>
        <td>
          <select ng-model="styles.choropleth[column.key].color_ramp">
          </select>
        </td>
      </tr>
    </tbody>
  </table>
  <table class="default_styles">
    <tbody>
      <tr ng-show="isType('polygon') && mapType == 'simple'">
        <td>Polygon fill</td>
        <td>
          <input class="colorpicker-input" colorpicker ng-model="styles.polygon.fill.color" type="text" ng-style="{'background-color': styles.polygon.fill.color || '#fff', 'color': getContrastYIQ(styles.polygon.fill.color)}" />
          <input class="spinner opacity" ui-spinner step=".1" max="1" min="0" type="text" ng-model="styles.polygon.fill.opacity" />
        </td>
      </tr>
      <tr ng-show="isType('polygon')">
        <td>Polygon stroke</td>
        <td>
          <input class="colorpicker-input" colorpicker ng-model="styles.polygon.stroke.color" type="text" ng-style="{'background-color': styles.polygon.stroke.color || '#fff', 'color': getContrastYIQ(styles.polygon.stroke.color)}" />
          <input class="spinner opacity" ui-spinner step=".1" max="1" min="0" type="text" ng-model="styles.polygon.stroke.opacity" />
          <input class="spinner width" ui-spinner step=".5" min="0" type="text" ng-model="styles.polygon.stroke.width" />
        </td>
      </tr>
      <tr ng-show="isType('polygon')">
        <td>Polygon composite operation</td>
        <td>
          <select ng-options="key as value for (key, value) in composites" ng-model="styles.polygon.composite"></select>
        </td>
      </tr>
      <tr ng-show="isType('point')">
        <td>Marker fill</td>
        <td>
          <input ng-show="mapType == 'simple'" class="colorpicker-input" colorpicker ng-model="styles.point.fill.color" type="text" ng-style="{'background-color': styles.point.fill.color || '#fff', 'color': getContrastYIQ(styles.point.fill.color)}" />
          <input class="spinner opacity" ui-spinner step=".1" max="1" min="0" type="text" ng-model="styles.point.fill.opacity" />
          <input class="spinner width" ui-spinner step=".5" min="0" type="text" ng-model="styles.point.fill.width" />
        </td>
      </tr>
      <tr ng-show="isType('point')">
        <td>Marker stroke</td>
        <td>
          <input class="colorpicker-input" colorpicker ng-model="styles.point.stroke.color" type="text" ng-style="{'background-color': styles.point.stroke.color || '#fff', 'color': getContrastYIQ(styles.point.stroke.color)}" />
          <input class="spinner opacity" ui-spinner step=".1" max="1" min="0" type="text" ng-model="styles.point.stroke.opacity" />
          <input class="spinner width" ui-spinner step=".5" min="0" type="text" ng-model="styles.point.stroke.width" />
        </td>
      </tr>
      <tr ng-show="isType('point')">
        <td>Marker composite operation</td>
        <td>
          <select ng-options="key as value for (key, value) in composites" ng-model="styles.point.composite"></select>
        </td>
      </tr>
      <tr ng-show="isType('point')">
        <td>
          <label for="marker_allowoverlap_input">Allow marker overlap</label>
        </td>
        <td>
          <input id="marker_allowoverlap_input" type="checkbox" ng-model="styles.point.allowOverlap">
        </td>
      </tr>
      <tr ng-show="isType('linestring')">
        <td>Line fill</td>
        <td>
          <input ng-show="mapType == 'simple'" class="colorpicker-input" colorpicker ng-model="styles.linestring.fill.color" type="text" ng-style="{'background-color': styles.linestring.fill.color || '#fff', 'color': getContrastYIQ(styles.linestring.fill.color)}" />
          <input class="spinner opacity" ui-spinner step=".1" max="1" min="0" type="text" ng-model="styles.linestring.fill.opacity" />
          <input class="spinner width" ui-spinner step=".5" min="0" type="text" ng-model="styles.linestring.fill.width" />
        </td>
      </tr>
      <tr ng-show="isType('linestring')">
        <td>Composite operation</td>
        <td>
          <select ng-options="key as value for (key, value) in composites" ng-model="styles.linestring.composite"></select>
        </td>
      </tr>
    </tbody>
  </table>
  <pre ng-hide="1==1" carto-editor="styles" group="table.title" ng-model="cartocss">{{cartocss}}</pre>
</div>
